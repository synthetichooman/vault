<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>contact - hooman</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="assets/favicon.png" type="image/png">
</head>
<body>
    <header class="vault-header"></header>
    <main class="vault">
        <div class="header-spacer"></div>
        <nav class="main-nav">
            <a href="index.html">vault</a>
            <a href="contact.html" class="active">contact</a>
            <a href="https://athoce.kr" target="_blank" rel="noopener noreferrer">shop</a>
        </nav>
        <div class="contact-form-container">
            <h2>contact</h2>
            <div class="form-instructions">
                <p>폼 작성 전 유의사항이나 안내 문구를 이 곳에 입력하세요. 이 문구는 contact.html 파일에서 직접 수정할 수 있습니다.</p>
            </div>
            <form id="contact-form" action="https://formspree.io/f/xpwjnvwr" method="POST">
                <div class="form-group">
                    <label for="name">name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="contact">contact (email or instagram)</label>
                    <input type="text" id="contact" name="contact" required>
                </div>
                <div class="form-group">
                    <label for="message">message</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                </div>
                <button type="submit">submit</button>
            </form>
            <div id="form-success-message" style="display: none; text-align: center;">
                <p>sent</p>
                <p style="margin-top: 20px;"><a href="javascript:history.back()" style="text-decoration: underline; color: inherit;">back</a></p>
            </div>
        </div>
    </main>
    <footer class="main-footer">
        <div class="footer-bar">
            <p>suggestions for corrections and image redistribution are welcome</p>
            <p><a href="https://instagram.com/synthetic.hooman" target="_blank" rel="noopener noreferrer">instagram</a></p>
        </div>
    </footer>

    <script>
      var form = document.getElementById("contact-form");
      var successMessage = document.getElementById("form-success-message");
      
      async function handleSubmit(event) {
        event.preventDefault();
        var data = new FormData(event.target);
        fetch(event.target.action, {
          method: form.method,
          body: data,
          headers: {
              'Accept': 'application/json'
          }
        }).then(response => {
          if (response.ok) {
            var nav = document.querySelector(".main-nav");
            var instructions = document.querySelector(".form-instructions");
            var title = document.querySelector(".contact-form-container h2");
            if(nav) { nav.style.display = "none"; }
            if(instructions) { instructions.style.display = "none"; }
            if(title) { title.style.display = "none"; }
            form.style.display = "none";
            successMessage.style.display = "block";
          } else {
            response.json().then(data => {
              // Optional: handle form errors from formspree
              alert("Oops! There was a problem submitting your form");
            })
          }
        }).catch(error => {
          alert("Oops! There was a problem submitting your form");
        });
      }
      form.addEventListener("submit", handleSubmit)
    </script>

</body>
</html>
